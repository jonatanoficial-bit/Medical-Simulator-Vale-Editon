/* ============================================================
   Simulador Médico - UI AAA (Mobile-first) - COMPATÍVEL COM O INDEX NOVO
   ============================================================ */

:root{
  --bg: #0b1320;
  --text: #e8eefc;
  --muted: rgba(232,238,252,0.68);

  --card: rgba(255,255,255,0.10);
  --card2: rgba(255,255,255,0.14);

  --accent: #4dd7ff;
  --accent2: #5bffb0;

  --danger: #ff4d6d;
  --warn: #ffcc00;
  --ok: #33d17a;

  --shadow: 0 14px 40px rgba(0,0,0,0.35);
  --radius: 18px;
  --radius2: 22px;
  --border: 1px solid rgba(255,255,255,0.12);

  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

*{ box-sizing: border-box; }

html,body{
  margin: 0;
  padding: 0;
  height: 100%;
  background:
    radial-gradient(1200px 900px at 20% 10%, rgba(77,215,255,0.18), transparent 60%),
    radial-gradient(1000px 900px at 90% 70%, rgba(91,255,176,0.10), transparent 55%),
    var(--bg);
  color: var(--text);
  font-family: var(--font);
}

button, input, select{
  font-family: var(--font);
}

a{ color: inherit; }

.screen{
  display: none;
  min-height: 100vh;
  padding: 18px;
}

.screen.active{
  display: block;
}

/* ============================================================
   Helpers / UI
   ============================================================ */

.card{
  background: rgba(255,255,255,0.08);
  border: var(--border);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  padding: 16px;
  backdrop-filter: blur(10px);
}

.primary{
  width: 100%;
  padding: 12px 14px;
  border: none;
  border-radius: 14px;
  background: linear-gradient(90deg, rgba(77,215,255,0.95), rgba(91,255,176,0.88));
  color: #06101b;
  font-weight: 900;
  cursor: pointer;
  box-shadow: 0 12px 30px rgba(77,215,255,0.18);
  transition: transform 0.12s ease;
}
.primary:hover{ transform: translateY(-1px); }
.primary:active{ transform: translateY(0px); }

.ghost{
  border: 1px solid rgba(255,255,255,0.16);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 14px;
  cursor: pointer;
}

.divider{
  height: 1px;
  background: rgba(255,255,255,0.12);
  margin: 14px 0;
}

.muted{ color: var(--muted); }

.actions-row{
  margin-top: 14px;
  display: grid;
  gap: 10px;
}

.form-row{
  display: grid;
  gap: 8px;
  margin: 10px 0 14px 0;
}
.form-row label{
  color: var(--muted);
  font-size: 12px;
}
.form-row input{
  width: 100%;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.25);
  color: var(--text);
  outline: none;
}

.form-grid{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
}
.form-grid label{
  display: block;
  color: var(--muted);
  font-size: 12px;
  margin-bottom: 6px;
}
.form-grid select{
  width: 100%;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.22);
  color: var(--text);
}

/* ============================================================
   COVER
   ============================================================ */

#cover-screen{
  display: none;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 0;
}
#cover-screen.active{ display: flex; }

.cover-bg{
  position: fixed;
  inset: 0;
  background: url("images/capa.png") center/cover no-repeat;
  filter: contrast(1.05) saturate(1.05) brightness(0.65);
  transform: scale(1.02);
}
.cover-overlay{
  position: relative;
  z-index: 2;
  max-width: 560px;
  padding: 22px 18px;
  margin: 18px;
  background: rgba(10,16,28,0.68);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}
.cover-logo{
  width: 180px;
  height: auto;
  border-radius: 18px;
  margin-bottom: 14px;
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 18px 40px rgba(0,0,0,0.45);
}
.cover-overlay h1{
  margin: 0 0 8px 0;
  font-size: 40px;
  letter-spacing: 0.5px;
}
.cover-overlay p{
  margin: 0;
  color: rgba(232,238,252,0.86);
}
.cover-overlay .hint{
  display: inline-block;
  margin-top: 12px;
  color: var(--muted);
  font-size: 13px;
}

/* ============================================================
   WELCOME (CORREDOR)
   ============================================================ */

#welcome-screen{
  padding: 0;
}
.welcome-bg{
  position: fixed;
  inset: 0;
  background: url("images/corredor.png") center/cover no-repeat;
  filter: saturate(1.1) contrast(1.06) brightness(0.70);
  transform: scale(1.02);
}
#welcome-screen .panel{
  position: relative;
  z-index: 2;
  max-width: 760px;
  margin: 14vh auto 0 auto;
  padding: 22px 18px;
  background: rgba(12,18,30,0.72);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}
.panel h2{
  margin: 0 0 10px 0;
  font-size: 26px;
}
.panel p{
  margin: 0 0 10px 0;
  line-height: 1.45;
  color: rgba(232,238,252,0.86);
}
.panel ul{
  margin: 10px 0 0 18px;
  color: rgba(232,238,252,0.86);
}
.tap-anywhere{
  margin-top: 14px !important;
  color: var(--muted) !important;
  font-size: 13px;
}

/* ============================================================
   LOBBY (CRIAR PERFIL)
   ============================================================ */

#lobby-screen{
  position: relative;
}
.lobby-bg{
  position: fixed;
  inset: 0;
  background: radial-gradient(900px 700px at 20% 20%, rgba(77,215,255,0.12), transparent 60%),
              radial-gradient(900px 700px at 80% 70%, rgba(91,255,176,0.08), transparent 55%),
              url("images/consultorio.png") center/cover no-repeat;
  filter: contrast(1.05) brightness(0.70);
  transform: scale(1.02);
}

.panel.wide{
  position: relative;
  z-index: 2;
  max-width: 920px;
  margin: 28px auto;
  padding: 18px;
  background: rgba(12,18,30,0.72);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}

.panel-header p{
  color: rgba(232,238,252,0.82);
  margin-top: 6px;
}

.avatar-grid{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
  margin-top: 10px;
}

.avatar-btn{
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  border-radius: 16px;
  padding: 10px;
  color: var(--text);
  cursor: pointer;
  display: grid;
  place-items: center;
  gap: 8px;
  transition: transform 0.12s ease, border-color 0.12s ease, background 0.12s ease;
}
.avatar-btn img{
  width: 86px;
  height: 86px;
  border-radius: 16px;
  object-fit: cover;
  box-shadow: 0 10px 22px rgba(0,0,0,0.25);
  border: 1px solid rgba(255,255,255,0.12);
}
.avatar-btn span{
  color: rgba(232,238,252,0.9);
  font-size: 13px;
}
.avatar-btn:hover{ transform: translateY(-2px); }
.avatar-btn.selected{
  border-color: rgba(77,215,255,0.65);
  background: rgba(77,215,255,0.10);
}

/* ============================================================
   OFFICE (CONSULTÓRIO)
   ============================================================ */

.office-bg{
  position: fixed;
  inset: 0;
  background: url("images/consultorio.png") center/cover no-repeat;
  filter: contrast(1.05) brightness(0.68) saturate(1.05);
  transform: scale(1.02);
}

.topbar{
  position: sticky;
  top: 0;
  z-index: 10;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  margin: 0 auto 14px auto;
  max-width: 1240px;
  background: rgba(10,16,28,0.72);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}

.top-left{
  display: flex;
  align-items: center;
  gap: 12px;
}
.top-avatar{
  width: 52px;
  height: 52px;
  border-radius: 16px;
  object-fit: cover;
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 10px 24px rgba(0,0,0,0.35);
  background: rgba(255,255,255,0.06);
}
.top-meta{
  display: grid;
  gap: 2px;
}
.top-name{
  font-weight: 900;
}
.top-sub{
  color: var(--muted);
  font-size: 12px;
}

.chip{
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.12);
}

.office-layout{
  position: relative;
  z-index: 2;
  max-width: 1240px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 1.35fr 0.85fr;
  gap: 14px;
}

.kpi-row{
  display: grid;
  grid-template-columns: repeat(4, minmax(0,1fr));
  gap: 10px;
  margin-top: 12px;
}
.kpi{
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 16px;
  padding: 12px;
}
.kpi-label{
  color: var(--muted);
  font-size: 12px;
}
.kpi-value{
  font-size: 18px;
  font-weight: 900;
  margin-top: 4px;
}
.kpi-value.good{ color: var(--ok); }
.kpi-value.warn{ color: var(--warn); }
.kpi-value.bad{ color: var(--danger); }

.chart-wrap{
  margin-top: 12px;
}
.mini-chart{
  height: 10px;
  width: 100%;
  border-radius: 999px;
  overflow: hidden;
  background: rgba(255,255,255,0.10);
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
}
.mini-chart .bar{
  height: 100%;
  width: 0%;
  transition: width 0.25s ease;
}
.mini-chart .bar.good{ background: rgba(51,209,122,0.85); }
.mini-chart .bar.warn{ background: rgba(255,204,0,0.85); }
.mini-chart .bar.bad{ background: rgba(255,77,109,0.85); }
.mini-legend{
  display: flex;
  gap: 10px;
  margin-top: 10px;
  color: var(--muted);
  font-size: 12px;
}
.lg.good{ color: rgba(51,209,122,0.9); }
.lg.warn{ color: rgba(255,204,0,0.9); }
.lg.bad{ color: rgba(255,77,109,0.9); }

.role-box{
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 16px;
  padding: 12px;
}
.role-title{
  color: var(--muted);
  font-size: 12px;
}
.role-big{
  margin-top: 6px;
  font-size: 22px;
  font-weight: 900;
}
.tips{
  margin: 8px 0 0 18px;
  color: rgba(232,238,252,0.86);
}

/* ============================================================
   GAME
   ============================================================ */

.game-bg{
  position: fixed;
  inset: 0;
  background: url("images/consultorio.png") center/cover no-repeat;
  filter: contrast(1.04) brightness(0.66) saturate(1.05);
  transform: scale(1.02);
}

.game-layout{
  position: relative;
  z-index: 2;
  max-width: 1240px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 0.85fr 1.15fr;
  gap: 14px;
}

.patients-pane h3{
  margin: 0 0 10px 0;
}

.patients-list{
  display: grid;
  gap: 10px;
}

.patient-card{
  border-radius: 16px;
  padding: 12px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  cursor: pointer;
  transition: transform 0.12s ease, border-color 0.12s ease, background 0.12s ease;
}
.patient-card:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.08); }
.patient-card.active{
  border-color: rgba(77,215,255,0.55);
  background: rgba(77,215,255,0.10);
}

.patient-card-top{
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
}
.patient-name{ font-weight: 900; }
.patient-status{
  font-size: 12px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.18);
}
.status-stable{ color: var(--ok); }
.status-unstable{ color: var(--warn); }
.status-critical{ color: var(--danger); }
.status-dead{ color: #ff6b6b; }

.patient-details{
  min-height: 280px;
}

.patient-details .empty-state{
  padding: 18px;
  text-align: center;
  color: rgba(232,238,252,0.82);
}

.patient-header{
  display: grid;
  grid-template-columns: 110px 1fr 320px;
  gap: 14px;
  align-items: start;
}

.patient-portrait{
  width: 110px;
  height: 110px;
  border-radius: 18px;
  background: rgba(255,255,255,0.08) center/cover no-repeat;
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 12px 24px rgba(0,0,0,0.30);
}

.patient-main h2{
  margin: 0 0 6px 0;
  font-size: 22px;
}

.patient-sub{
  color: var(--muted);
  font-size: 12px;
}

.badge{
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.18);
}

.patient-complaint-big{
  margin-top: 10px;
  color: rgba(232,238,252,0.88);
  line-height: 1.45;
}

.vitals-box{
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 18px;
  padding: 12px;
}
.vitals-box h3{
  margin: 0 0 10px 0;
}
.vitals-grid{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}
.vital{
  background: rgba(0,0,0,0.18);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 14px;
  padding: 10px;
  display: flex;
  justify-content: space-between;
  gap: 10px;
}
.vital span{ color: var(--muted); font-size: 12px; }
.vital b{ font-size: 14px; }

/* Painel de ações fixo no fim da tela do paciente */
.actions-panel{
  margin-top: 14px;
  display: grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 10px;
}
.action-btn{
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  padding: 12px 12px;
  cursor: pointer;
  font-weight: 900;
  transition: transform 0.12s ease, background 0.12s ease;
}
.action-btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.08); }
.action-btn.danger{ border-color: rgba(255,77,109,0.35); }

/* ============================================================
   OVERLAYS (EXAMES / MEDS / DX / INFO / REPORT)
   ============================================================ */

.overlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.64);
  display: none;
  place-items: center;
  z-index: 999;
  padding: 14px;
}
.overlay.active{ display: grid; }

.overlay-card{
  width: min(980px, 100%);
  max-height: 92vh;
  overflow: hidden;
  background: rgba(18,26,40,0.92);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
  display: grid;
  grid-template-rows: auto 1fr;
}
.overlay-head{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 14px;
  border-bottom: 1px solid rgba(255,255,255,0.12);
}
.overlay-head h3{
  margin: 0;
  font-size: 18px;
  font-weight: 900;
}
.overlay-body{
  padding: 14px;
  overflow: auto;
}

/* Listas internas em overlays */
.grid-list{
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}
.grid-item{
  border-radius: 14px;
  padding: 10px 12px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  cursor: pointer;
  text-align: left;
}
.grid-item:hover{ background: rgba(255,255,255,0.08); }

.result-box{
  border-radius: 16px;
  padding: 12px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  margin-bottom: 12px;
}
.result-box h4{ margin: 0 0 8px 0; }
.result-box pre{
  margin: 0;
  white-space: pre-wrap;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 13px;
  color: rgba(232,238,252,0.90);
}

/* DX */
.dx-search{
  width: 100%;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.25);
  color: var(--text);
  margin-top: 10px;
  outline: none;
}
.dx-list{
  margin-top: 12px;
  display: grid;
  gap: 8px;
}
.dx-item{
  border-radius: 14px;
  padding: 10px 12px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  cursor: pointer;
  text-align: left;
}
.dx-item:hover{ background: rgba(255,255,255,0.08); }

/* Toast */
.toast{
  position: fixed;
  left: 50%;
  bottom: 16px;
  transform: translateX(-50%) translateY(20px);
  opacity: 0;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(18,26,40,0.92);
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: var(--shadow);
  color: var(--text);
  transition: opacity 0.18s ease, transform 0.18s ease;
  z-index: 1200;
}
.toast.show{
  opacity: 1;
  transform: translateX(-50%) translateY(0px);
}

/* ============================================================
   Responsivo
   ============================================================ */

@media (max-width: 980px){
  .office-layout{ grid-template-columns: 1fr; }
  .game-layout{ grid-template-columns: 1fr; }
  .patient-header{ grid-template-columns: 88px 1fr; }
  .vitals-box{ grid-column: 1 / -1; }
  .grid-list{ grid-template-columns: repeat(2, minmax(0,1fr)); }
  .form-grid{ grid-template-columns: 1fr; }
  .actions-panel{ grid-template-columns: repeat(2, minmax(0,1fr)); }
  .kpi-row{ grid-template-columns: repeat(2, minmax(0,1fr)); }
}

@media (max-width: 520px){
  .cover-overlay h1{ font-size: 34px; }
  .grid-list{ grid-template-columns: 1fr; }
  .actions-panel{ grid-template-columns: 1fr; }
}