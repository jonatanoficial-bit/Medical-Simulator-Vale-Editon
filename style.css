/* ============================================================
   Simulador Médico - Style AAA (Mobile-first)
   (Atualizado: fundos nas telas + correção do espaço vazio no mobile)
   ============================================================ */

:root {
  --bg: #0b1320;
  --panel: rgba(255, 255, 255, 0.10);
  --panel2: rgba(255, 255, 255, 0.14);
  --text: #e8eefc;
  --muted: rgba(232, 238, 252, 0.68);
  --accent: #4dd7ff;
  --accent2: #5bffb0;
  --danger: #ff4d6d;
  --warning: #ffcc00;
  --ok: #33d17a;
  --card: rgba(255,255,255,0.12);
  --shadow: 0 14px 40px rgba(0,0,0,0.35);
  --radius: 18px;
  --radius2: 22px;
  --border: 1px solid rgba(255,255,255,0.12);
  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

* { box-sizing: border-box; }

html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background:
    radial-gradient(1200px 900px at 20% 10%, rgba(77,215,255,0.18), transparent 60%),
    radial-gradient(1000px 900px at 90% 70%, rgba(91,255,176,0.10), transparent 55%),
    var(--bg);
  color: var(--text);
  font-family: var(--font);
}

button, input, select {
  font-family: var(--font);
}

/* ====== Screens ====== */
.screen {
  display: none;
  min-height: 100vh;
  padding: 18px;
  position: relative; /* permite ::before de fundo */
  overflow: hidden;
}
.screen.active {
  display: block;
}

/* ====== Fundo padrão para telas (Lobby/Office/Game) ====== */
#lobby-screen::before,
#office-screen::before,
#game-screen::before {
  content: "";
  position: absolute;
  inset: 0;
  background: url("images/bg_hospital_02.jpg") center/cover no-repeat;
  filter: saturate(1.05) contrast(1.05) brightness(0.55);
  transform: scale(1.02);
  z-index: 0;
}

#lobby-screen > *,
#office-screen > *,
#game-screen > * {
  position: relative;
  z-index: 1;
}

/* ====== Cover (Tela Inicial) ====== */
#cover-screen {
  display: none;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  overflow: hidden;
}
#cover-screen.active { display: flex; }

#cover-screen::before {
  content: "";
  position: absolute;
  inset: 0;
  background: url("images/capa.jpg") center/cover no-repeat;
  filter: saturate(1.05) contrast(1.05) brightness(0.70);
  transform: scale(1.02);
  z-index: 0;
}

#cover-screen::after {
  content: "";
  position: absolute;
  inset: 0;
  background: radial-gradient(900px 700px at 50% 30%, rgba(0,0,0,0.10), rgba(0,0,0,0.60));
  z-index: 1;
}

.cover-content {
  position: relative;
  z-index: 2;
  padding: 28px 18px;
  background: rgba(255,255,255,0.08);
  border: var(--border);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
  max-width: 520px;
}
.cover-content h1 {
  margin: 0 0 8px 0;
  font-size: 44px;
  letter-spacing: 0.5px;
}
.cover-content p {
  margin: 0;
  color: var(--muted);
}

/* ====== Welcome ====== */
#welcome-screen .welcome-content {
  position: relative;
  min-height: calc(100vh - 36px);
  border-radius: var(--radius2);
  overflow: hidden;
  border: var(--border);
  box-shadow: var(--shadow);
}

.welcome-bg {
  position: absolute;
  inset: 0;
  background: url("images/hospital_corridor.jpg") center/cover no-repeat; /* troque para .png se precisar */
  filter: saturate(1.1) contrast(1.06) brightness(0.60);
  transform: scale(1.02);
}

.welcome-panel {
  position: relative;
  z-index: 2;
  padding: 24px;
  max-width: 720px;
  margin: 0 auto;
  margin-top: 16vh;
  background: rgba(12,18,30,0.68);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: var(--radius2);
  backdrop-filter: blur(10px);
}
.welcome-panel h2 {
  margin: 0 0 10px 0;
  font-size: 28px;
}
.welcome-panel p {
  margin: 0 0 10px 0;
  color: rgba(232,238,252,0.86);
  line-height: 1.45;
}
.welcome-panel .hint {
  margin-top: 14px;
  color: var(--muted);
  font-size: 14px;
}

/* ====== Lobby Setup ====== */
.lobby-content {
  max-width: 860px;
  margin: 0 auto;
  padding-top: 26px;
}
.lobby-content h2 {
  margin: 0 0 14px 0;
  font-size: 30px;
}
.player-setup {
  background: rgba(255,255,255,0.08);
  border: var(--border);
  border-radius: var(--radius2);
  padding: 18px;
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}

.player-setup label {
  display: block;
  color: var(--muted);
  margin: 4px 0 8px 0;
}
.player-setup input {
  width: 100%;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.25);
  color: var(--text);
  outline: none;
}
.player-setup h3 {
  margin: 16px 0 10px 0;
}

.avatar-selection {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 12px;
  margin-bottom: 14px;
}
.avatar-btn {
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  border-radius: 16px;
  padding: 10px;
  color: var(--text);
  cursor: pointer;
  display: grid;
  place-items: center;
  gap: 8px;
  transition: transform 0.12s ease, border-color 0.12s ease, background 0.12s ease;
}
.avatar-btn img {
  width: 80px;
  height: 80px;
  border-radius: 14px;
  object-fit: cover;
  box-shadow: 0 10px 22px rgba(0,0,0,0.25);
}
.avatar-btn span {
  color: rgba(232,238,252,0.9);
  font-size: 13px;
}
.avatar-btn:hover {
  transform: translateY(-2px);
}
.avatar-btn.selected {
  border-color: rgba(77,215,255,0.65);
  background: rgba(77,215,255,0.10);
}

.primary-btn {
  width: 100%;
  padding: 12px 14px;
  border: none;
  border-radius: 14px;
  background: linear-gradient(90deg, rgba(77,215,255,0.95), rgba(91,255,176,0.88));
  color: #06101b;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 12px 30px rgba(77,215,255,0.18);
  transition: transform 0.12s ease;
}
.primary-btn:hover { transform: translateY(-1px); }
.primary-btn:active { transform: translateY(0px); }

.ghost-btn {
  border: 1px solid rgba(255,255,255,0.16);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 14px;
  cursor: pointer;
}

/* ====== Office ====== */
.office-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 14px;
  max-width: 980px;
  margin: 0 auto;
  padding-top: 18px;
}
.office-profile {
  display: flex;
  align-items: center;
  gap: 14px;
}
.office-avatar {
  width: 70px;
  height: 70px;
  border-radius: 18px;
  background: rgba(255,255,255,0.08) center/cover no-repeat;
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 10px 22px rgba(0,0,0,0.28);
}
.office-name {
  font-size: 20px;
  font-weight: 800;
}
.office-level {
  color: var(--muted);
  font-size: 13px;
}

.office-scorebox {
  padding: 12px 14px;
  border-radius: var(--radius2);
  background: rgba(255,255,255,0.08);
  border: var(--border);
  box-shadow: var(--shadow);
  min-width: 140px;
}
.score-label { color: var(--muted); font-size: 12px; }
.score-value { font-size: 20px; font-weight: 900; }

.office-body {
  max-width: 980px;
  margin: 16px auto 0 auto;
  display: grid;
  grid-template-columns: 1.35fr 0.85fr;
  gap: 14px;
}
.office-card {
  background: rgba(255,255,255,0.08);
  border: var(--border);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  padding: 16px;
  backdrop-filter: blur(10px);
}
.office-card h3 {
  margin: 0 0 12px 0;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 10px;
}
.stat {
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 16px;
  padding: 12px;
}
.stat-label { color: var(--muted); font-size: 12px; }
.stat-value { font-size: 18px; font-weight: 900; margin-top: 4px; }

.office-controls {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 10px;
  margin: 14px 0;
}
.control label {
  display: block;
  color: var(--muted);
  font-size: 12px;
  margin-bottom: 6px;
}
.control select {
  width: 100%;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.22);
  color: var(--text);
}

.profile-row {
  display: flex;
  align-items: center;
  gap: 12px;
}
.mini-avatar {
  width: 56px;
  height: 56px;
  border-radius: 14px;
  object-fit: cover;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
}
.profile-name { font-size: 18px; font-weight: 800; }

.muted { color: var(--muted); }

/* ====== Game Layout ====== */
.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin: 10px auto 16px auto;
  max-width: 1240px;
}
.top-left { display: flex; gap: 10px; }
.top-pill {
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(255,255,255,0.08);
  border: var(--border);
  box-shadow: var(--shadow);
}

.game-layout {
  max-width: 1240px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 0.85fr 1.15fr;
  gap: 14px;
}

.patients-panel, .patient-panel {
  background: rgba(255,255,255,0.08);
  border: var(--border);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  padding: 14px;
  backdrop-filter: blur(10px);
  min-height: calc(100vh - 170px);
}

.patients-panel h3 {
  margin: 0 0 10px 0;
}

.patients-list {
  display: grid;
  gap: 10px;
}

.patient-card {
  border-radius: 16px;
  padding: 12px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  cursor: pointer;
  transition: transform 0.12s ease, border-color 0.12s ease;
}
.patient-card:hover { transform: translateY(-1px); }
.patient-card.active {
  border-color: rgba(77,215,255,0.55);
  background: rgba(77,215,255,0.10);
}
.patient-card-top {
  display: flex;
  justify-content: space-between;
  gap: 10px;
  align-items: center;
}
.patient-name { font-weight: 900; }
.patient-complaint {
  margin-top: 6px;
  color: rgba(232,238,252,0.86);
  font-size: 13px;
}

.patient-status {
  font-size: 12px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.18);
}
.status-stable { color: var(--ok); }
.status-unstable { color: var(--warning); }
.status-critical { color: var(--danger); }
.status-dead { color: #ff6b6b; }

.patient-details .empty-state {
  padding: 18px;
  text-align: center;
  color: rgba(232,238,252,0.82);
}

.patient-header {
  display: grid;
  grid-template-columns: 110px 1fr 300px;
  gap: 14px;
  align-items: start;
}
.patient-portrait {
  width: 110px;
  height: 110px;
  border-radius: 18px;
  background: rgba(255,255,255,0.08) center/cover no-repeat;
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 12px 24px rgba(0,0,0,0.30);
}
.patient-main h2 {
  margin: 0 0 6px 0;
  font-size: 22px;
}
.patient-sub {
  color: var(--muted);
  font-size: 12px;
}
.dot { margin: 0 8px; opacity: 0.7; }
.badge {
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.18);
}
.patient-complaint-big {
  margin-top: 10px;
  color: rgba(232,238,252,0.88);
  line-height: 1.45;
}

.vitals-box {
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 18px;
  padding: 12px;
}
.vitals-box h3 {
  margin: 0 0 10px 0;
}
.vitals-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}
.vital {
  background: rgba(0,0,0,0.18);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 14px;
  padding: 10px;
  display: flex;
  justify-content: space-between;
  gap: 10px;
}
.vital span { color: var(--muted); font-size: 12px; }
.vital b { font-size: 14px; }

.actions-area {
  margin-top: 14px;
}
.actions-row {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
  margin-bottom: 10px;
}
.action-btn {
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  padding: 10px 12px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 10px;
  transition: transform 0.12s ease, background 0.12s ease;
}
.action-btn:hover { transform: translateY(-1px); background: rgba(255,255,255,0.08); }
.action-btn i { color: rgba(77,215,255,0.9); }
.action-btn span { font-weight: 800; font-size: 13px; }

/* Área de texto (História/Exame físico) */
.info-container{
  margin-top: 14px;
  padding: 12px 14px;
  border-radius: 14px;
  background: rgba(255,255,255,0.88);
  border: 1px solid rgba(0,0,0,0.06);
  min-height: 84px;
  max-height: 220px;
  overflow: auto;
  color: #0c1626;
}
.info-container h4 { margin: 0 0 8px 0; }
.info-container pre {
  margin: 0;
  white-space: pre-wrap;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 13px;
}

/* ====== Overlays ====== */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.62);
  display: grid;
  place-items: center;
  z-index: 999;
  padding: 14px;
}
.overlay.hidden { display: none; }

.overlay-content {
  width: min(980px, 100%);
  max-height: 92vh;
  overflow: auto;
  background: rgba(18,26,40,0.92);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: var(--radius2);
  box-shadow: var(--shadow);
  padding: 16px;
  backdrop-filter: blur(10px);
}

.overlay-back {
  margin-top: 12px;
  width: 100%;
  padding: 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.16);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  cursor: pointer;
  font-weight: 800;
}

.grid-list {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
  margin-top: 12px;
}
.grid-item {
  border-radius: 14px;
  padding: 10px 12px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  cursor: pointer;
  text-align: left;
}
.grid-item:hover { background: rgba(255,255,255,0.08); }

.result-box {
  border-radius: 16px;
  padding: 12px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  margin-bottom: 12px;
}
.result-box h4 { margin: 0 0 8px 0; }
.result-box pre {
  margin: 0;
  white-space: pre-wrap;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size: 13px;
  color: rgba(232,238,252,0.90);
}

/* ====== Diagnosis ====== */
.dx-search {
  width: 100%;
  padding: 10px 12px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.25);
  color: var(--text);
  margin-top: 10px;
  outline: none;
}
.dx-suggest { margin-top: 12px; }
.pill-row { display: flex; flex-wrap: wrap; gap: 8px; }
.pill {
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: rgba(232,238,252,0.9);
  font-size: 12px;
}
.dx-list {
  margin-top: 12px;
  display: grid;
  gap: 8px;
}
.dx-item {
  border-radius: 14px;
  padding: 10px 12px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: var(--text);
  cursor: pointer;
  text-align: left;
}
.dx-item:hover { background: rgba(255,255,255,0.08); }

/* ====== Report ====== */
.report-overlay { z-index: 1000; }
.report-content h2 { margin: 0 0 10px 0; }
.report-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  margin: 12px 0 14px 0;
}
.report-card {
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 16px;
  padding: 12px;
}
.report-card h3 { margin: 0 0 8px 0; }
.ok { color: var(--ok); }
.bad { color: var(--danger); }

/* ====== Toast ====== */
.toast {
  position: fixed;
  left: 50%;
  bottom: 16px;
  transform: translateX(-50%) translateY(20px);
  opacity: 0;
  padding: 10px 12px;
  border-radius: 14px;
  background: rgba(18,26,40,0.92);
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: var(--shadow);
  color: var(--text);
  transition: opacity 0.18s ease, transform 0.18s ease;
  z-index: 1200;
}
.toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0px);
}

/* ====== Responsivo ====== */
@media (max-width: 980px) {
  .office-body { grid-template-columns: 1fr; }
  .game-layout { grid-template-columns: 1fr; }

  /* >>> CORREÇÃO DO ESPAÇO GIGANTE NO MOBILE <<< */
  .patients-panel, .patient-panel {
    min-height: auto;      /* remove o min-height que “empurrava” tudo */
  }

  .patient-header { grid-template-columns: 88px 1fr; }
  .vitals-box { grid-column: 1 / -1; }
  .grid-list { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .actions-row { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .stats-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 520px) {
  .cover-content h1 { font-size: 36px; }
  .grid-list { grid-template-columns: 1fr; }
  .actions-row { grid-template-columns: 1fr; }
}